<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Court Documents Generator | Sarah Okafor Chambers</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content auth-modal">
            <div class="auth-header">
                <h2>Court Documents Generator</h2>
                <p>Sign in to generate professional court documents</p>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Sign In</button>
                <button class="auth-tab" data-tab="register">Register</button>
            </div>
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Enter password">
                </div>
                <button type="submit" class="btn btn-primary btn-full">Sign In</button>
                <p class="auth-error" id="loginError"></p>
            </form>
            <form id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required placeholder="Min 6 characters">
                </div>
                <div class="form-group">
                    <label for="registerConfirm">Confirm Password</label>
                    <input type="password" id="registerConfirm" required placeholder="Confirm password">
                </div>
                <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                <p class="auth-error" id="registerError"></p>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Court Documents Generator</span>
                </div>
                <div class="header-actions">
                    <span id="userEmail" class="user-email"></span>
                    <button id="signOutBtn" class="btn btn-outline btn-sm">Sign Out</button>
                </div>
            </div>
        </header>

        <!-- Progress Steps -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <span class="step-circle">1</span>
                <span class="step-label">Document Type</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <span class="step-circle">2</span>
                <span class="step-label">Case Header</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="3">
                <span class="step-circle">3</span>
                <span class="step-label">Content</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="4">
                <span class="step-circle">4</span>
                <span class="step-label">Download</span>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Step 1: Select Document Type -->
            <section id="step1" class="step active">
                <div class="step-header">
                    <h2>Select Document Type</h2>
                    <p>Choose the type of court document you want to generate</p>
                </div>
                <div class="document-types">
                    <button class="doc-type-card" data-type="witness-statement">
                        <div class="doc-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                <line x1="12" y1="11" x2="12" y2="17"></line>
                                <line x1="9" y1="14" x2="15" y2="14"></line>
                            </svg>
                        </div>
                        <h3>Witness Statement</h3>
                        <p>Factual evidence from witnesses with statement of truth</p>
                    </button>
                    <button class="doc-type-card" data-type="skeleton-argument">
                        <div class="doc-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                                <line x1="8" y1="6" x2="16" y2="6"></line>
                                <line x1="8" y1="10" x2="16" y2="10"></line>
                                <line x1="8" y1="14" x2="12" y2="14"></line>
                            </svg>
                        </div>
                        <h3>Skeleton Argument</h3>
                        <p>Legal submissions with issues, law, and application</p>
                    </button>
                    <button class="doc-type-card" data-type="position-statement">
                        <div class="doc-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                            </svg>
                        </div>
                        <h3>Position Statement</h3>
                        <p>Party's position for court hearings</p>
                    </button>
                    <button class="doc-type-card" data-type="draft-order">
                        <div class="doc-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                        </div>
                        <h3>Draft Order</h3>
                        <p>Proposed court orders with recitals and provisions</p>
                    </button>
                </div>
            </section>

            <!-- Step 2: Case Header Details -->
            <section id="step2" class="step">
                <div class="step-header">
                    <h2>Case Header</h2>
                    <p>Enter the court and case details that appear at the top of the document</p>
                </div>
                <div class="form-card">
                    <!-- Case Number - Top Right -->
                    <div class="form-group">
                        <label for="caseNumber">Case Number <span class="required">*</span></label>
                        <input type="text" id="caseNumber" placeholder="e.g., 20025995" required>
                        <small class="form-hint">Appears top-right of first page</small>
                    </div>

                    <!-- Court Selection -->
                    <div class="form-group">
                        <label for="courtName">Court <span class="required">*</span></label>
                        <select id="courtName" required>
                            <option value="">Select Court</option>
                            <option value="IN THE COURT OF PROTECTION">Court of Protection</option>
                            <option value="IN THE HIGH COURT OF JUSTICE&#10;FAMILY DIVISION">High Court - Family Division</option>
                            <option value="IN THE HIGH COURT OF JUSTICE&#10;CHANCERY DIVISION">High Court - Chancery Division</option>
                            <option value="IN THE HIGH COURT OF JUSTICE&#10;KING'S BENCH DIVISION">High Court - King's Bench Division</option>
                            <option value="IN THE HIGH COURT OF JUSTICE&#10;KING'S BENCH DIVISION&#10;ADMINISTRATIVE COURT">Administrative Court</option>
                            <option value="IN THE FAMILY COURT">Family Court</option>
                            <option value="IN THE COUNTY COURT">County Court</option>
                            <option value="IN THE CROWN COURT">Crown Court</option>
                        </select>
                        <small class="form-hint">Left-aligned below case number</small>
                    </div>

                    <!-- In the Matter Of (Statute) -->
                    <div class="form-group">
                        <label for="matterOf">In the Matter of (Statute/Act)</label>
                        <input type="text" id="matterOf" placeholder="e.g., THE MENTAL CAPACITY ACT 2005">
                        <small class="form-hint">Optional - the relevant legislation</small>
                    </div>

                    <!-- In the Matter Of (Subject) -->
                    <div class="form-group">
                        <label for="inMatterPerson">In the Matter of (Person/Property)</label>
                        <input type="text" id="inMatterPerson" placeholder="e.g., JOHN SMITH or 123 High Street, London">
                        <small class="form-hint">The person (P) or property that is the subject</small>
                    </div>

                    <hr class="section-divider">

                    <!-- Proceeding Type Toggle -->
                    <div class="form-group">
                        <label>Type of Proceedings</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn active" data-value="non-adversarial" id="toggleNonAdversarial">
                                Non-Adversarial
                                <small>- and -</small>
                            </button>
                            <button type="button" class="toggle-btn" data-value="adversarial" id="toggleAdversarial">
                                Adversarial
                                <small>- v -</small>
                            </button>
                        </div>
                        <input type="hidden" id="proceedingType" value="non-adversarial">
                    </div>

                    <!-- Parties Section -->
                    <h3 class="form-section-title">Parties</h3>
                    <div id="partiesContainer">
                        <!-- Party 1 -->
                        <div class="party-entry" data-party-index="0">
                            <div class="party-header">
                                <span class="party-label">Party 1</span>
                            </div>
                            <div class="form-row">
                                <div class="form-group flex-2">
                                    <label>Name</label>
                                    <input type="text" class="party-name" placeholder="e.g., THE AUTHORISED OFFICER OF THURROCK COUNCIL">
                                </div>
                                <div class="form-group flex-1">
                                    <label>Designation</label>
                                    <select class="party-role">
                                        <option value="Applicant">Applicant</option>
                                        <option value="Claimant">Claimant</option>
                                        <option value="Petitioner">Petitioner</option>
                                        <option value="Appellant">Appellant</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row litigation-friend-row">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" class="has-litigation-friend">
                                        <span>Has Litigation Friend / Representative</span>
                                    </label>
                                </div>
                            </div>
                            <div class="litigation-friend-details hidden">
                                <div class="form-row">
                                    <div class="form-group flex-1">
                                        <label>Prefix</label>
                                        <select class="lf-prefix">
                                            <option value="by his litigation friend">by his litigation friend</option>
                                            <option value="by her litigation friend">by her litigation friend</option>
                                            <option value="by their litigation friend">by their litigation friend</option>
                                            <option value="by his Accredited Legal Representative">by his Accredited Legal Representative</option>
                                            <option value="by her Accredited Legal Representative">by her Accredited Legal Representative</option>
                                        </select>
                                    </div>
                                    <div class="form-group flex-2">
                                        <label>Name of Litigation Friend</label>
                                        <input type="text" class="lf-name" placeholder="e.g., THE OFFICIAL SOLICITOR">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Party 2 -->
                        <div class="party-entry" data-party-index="1">
                            <div class="party-header">
                                <span class="party-label">Party 2</span>
                                <button type="button" class="btn btn-icon btn-remove-party hidden" title="Remove party">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-row">
                                <div class="form-group flex-2">
                                    <label>Name</label>
                                    <input type="text" class="party-name" placeholder="e.g., JOHN SMITH">
                                </div>
                                <div class="form-group flex-1">
                                    <label>Designation</label>
                                    <select class="party-role">
                                        <option value="Respondent">Respondent</option>
                                        <option value="Defendant">Defendant</option>
                                        <option value="First Respondent">First Respondent</option>
                                        <option value="Second Respondent">Second Respondent</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row litigation-friend-row">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" class="has-litigation-friend">
                                        <span>Has Litigation Friend / Representative</span>
                                    </label>
                                </div>
                            </div>
                            <div class="litigation-friend-details hidden">
                                <div class="form-row">
                                    <div class="form-group flex-1">
                                        <label>Prefix</label>
                                        <select class="lf-prefix">
                                            <option value="by his litigation friend">by his litigation friend</option>
                                            <option value="by her litigation friend">by her litigation friend</option>
                                            <option value="by their litigation friend">by their litigation friend</option>
                                            <option value="by his Accredited Legal Representative">by his Accredited Legal Representative</option>
                                            <option value="by her Accredited Legal Representative">by her Accredited Legal Representative</option>
                                        </select>
                                    </div>
                                    <div class="form-group flex-2">
                                        <label>Name of Litigation Friend</label>
                                        <input type="text" class="lf-name" placeholder="e.g., THE OFFICIAL SOLICITOR">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" id="addPartyBtn" class="btn btn-outline btn-sm">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Another Party
                    </button>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" id="backToStep1">Back</button>
                        <button type="button" class="btn btn-primary" id="toStep3">Continue</button>
                    </div>
                </div>
            </section>

            <!-- Step 3: Document Content -->
            <section id="step3" class="step">
                <div class="step-header">
                    <h2 id="step3Title">Document Content</h2>
                    <p id="step3Subtitle">Build your witness statement content</p>
                </div>

                <!-- Witness Statement Form -->
                <div id="witnessStatementForm" class="document-form">
                    <div class="form-card">
                        <h3 class="form-section-title">Witness Details</h3>
                        <div class="form-row">
                            <div class="form-group flex-2">
                                <label for="witnessName">Full Name of Witness <span class="required">*</span></label>
                                <input type="text" id="witnessName" placeholder="e.g., Richard Hansell">
                                <small class="form-hint">Will appear in CAPITALS in opening line</small>
                            </div>
                            <div class="form-group flex-1">
                                <label for="statementNumber">Statement Number</label>
                                <select id="statementNumber">
                                    <option value="1st">1st Statement</option>
                                    <option value="2nd">2nd Statement</option>
                                    <option value="3rd">3rd Statement</option>
                                    <option value="4th">4th Statement</option>
                                    <option value="5th">5th Statement</option>
                                    <option value="6th">6th Statement</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="witnessAddress">Address</label>
                            <input type="text" id="witnessAddress" placeholder="e.g., Thurrock Council, Civic Offices, New Road, Grays, Essex RM17 6SL">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="witnessRole">Role/Position</label>
                                <input type="text" id="witnessRole" placeholder="e.g., Social Worker, Thurrock Council">
                            </div>
                            <div class="form-group">
                                <label for="exhibitMark">Exhibit Mark (if any)</label>
                                <input type="text" id="exhibitMark" placeholder="e.g., RH-1">
                            </div>
                        </div>
                    </div>

                    <!-- Writing Mode Toggle -->
                    <div class="form-card">
                        <h3 class="form-section-title">Statement Content</h3>
                        <div class="writing-mode-toggle">
                            <button type="button" class="mode-btn active" data-mode="structured" id="structuredModeBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="8" y1="6" x2="21" y2="6"></line>
                                    <line x1="8" y1="12" x2="21" y2="12"></line>
                                    <line x1="8" y1="18" x2="21" y2="18"></line>
                                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                                </svg>
                                Structured Mode
                            </button>
                            <button type="button" class="mode-btn" data-mode="free" id="freeModeBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 20h9"></path>
                                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                                </svg>
                                Free Writing Mode
                            </button>
                        </div>

                        <!-- Structured Mode Content -->
                        <div id="structuredMode" class="writing-mode-content active">
                            <div class="structured-info">
                                <p><strong>Structured Mode:</strong> Add individual paragraphs that are automatically numbered. Drag to reorder.</p>
                            </div>

                            <!-- Paragraph Container -->
                            <div id="paragraphsContainer">
                                <!-- Paragraphs will be added here dynamically -->
                            </div>

                            <div class="add-paragraph-section">
                                <button type="button" id="addParagraphBtn" class="btn btn-outline">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    Add Paragraph
                                </button>

                                <!-- Phrase Suggestions -->
                                <div class="phrase-suggestions">
                                    <span class="suggestions-label">Quick phrases:</span>
                                    <button type="button" class="phrase-btn" data-phrase="I am the allocated social worker for P and have held this role since [date].">Social Worker intro</button>
                                    <button type="button" class="phrase-btn" data-phrase="I make this statement in support of the Applicant's application for [orders sought].">Purpose</button>
                                    <button type="button" class="phrase-btn" data-phrase="I refer to page [X] of the hearing bundle at Tab [Y] which is [document description].">Bundle reference</button>
                                    <button type="button" class="phrase-btn" data-phrase="A Round Table Meeting took place on [date] at which it was agreed that [outcome].">RTM reference</button>
                                    <button type="button" class="phrase-btn" data-phrase="The current care and support plan provides for [description of care package].">Care plan</button>
                                </div>
                            </div>
                        </div>

                        <!-- Free Mode Content -->
                        <div id="freeMode" class="writing-mode-content">
                            <div class="free-mode-info">
                                <p><strong>Free Writing Mode:</strong> Write your entire statement in one text box. Use line breaks between paragraphs. Numbering will be added automatically.</p>
                            </div>
                            <div class="form-group">
                                <textarea id="freeWritingArea" rows="20" placeholder="1. I am the allocated social worker for P and have been since [date].

2. This statement addresses...

3. ..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Exhibits Section -->
                    <div class="form-card">
                        <h3 class="form-section-title">
                            Exhibits
                            <span class="section-subtitle">(Optional)</span>
                        </h3>
                        <div class="exhibits-info">
                            <p>Add exhibits that are attached to this witness statement. These will be listed in a schedule.</p>
                        </div>

                        <div id="exhibitsContainer">
                            <!-- Exhibits will be added here dynamically -->
                        </div>

                        <div class="add-exhibit-section">
                            <div class="form-row">
                                <div class="form-group flex-1">
                                    <label>Document Type</label>
                                    <select id="newExhibitType">
                                        <option value="">Select type...</option>
                                        <option value="Care and Support Plan">Care and Support Plan</option>
                                        <option value="Mental Capacity Assessment">Mental Capacity Assessment</option>
                                        <option value="COP3 Assessment">COP3 Assessment</option>
                                        <option value="Best Interests Assessment">Best Interests Assessment</option>
                                        <option value="Social Work Report">Social Work Report</option>
                                        <option value="Medical Report">Medical Report</option>
                                        <option value="Psychiatric Report">Psychiatric Report</option>
                                        <option value="Psychological Report">Psychological Report</option>
                                        <option value="Nursing Assessment">Nursing Assessment</option>
                                        <option value="Safeguarding Report">Safeguarding Report</option>
                                        <option value="Position Statement">Position Statement</option>
                                        <option value="Witness Statement">Witness Statement</option>
                                        <option value="Email correspondence">Email correspondence</option>
                                        <option value="Letter">Letter</option>
                                        <option value="Meeting Minutes">Meeting Minutes</option>
                                        <option value="RTM Minutes">RTM Minutes</option>
                                        <option value="Photograph">Photograph</option>
                                        <option value="Other">Other (specify)</option>
                                    </select>
                                </div>
                                <div class="form-group flex-1">
                                    <label>Date</label>
                                    <input type="date" id="newExhibitDate">
                                </div>
                            </div>
                            <div class="form-group" id="exhibitCustomTypeGroup" style="display: none;">
                                <label>Custom Document Type</label>
                                <input type="text" id="newExhibitCustomType" placeholder="Enter document type">
                            </div>
                            <div class="form-group">
                                <label>Description (optional)</label>
                                <input type="text" id="newExhibitDescription" placeholder="e.g., from Dr Smith to Dr Jones">
                            </div>
                            <button type="button" id="addExhibitBtn" class="btn btn-outline btn-sm">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                Add Exhibit
                            </button>
                        </div>
                    </div>

                    <div class="form-card">
                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" id="backToStep2">Back</button>
                            <button type="button" class="btn btn-primary" id="toStep4">Continue to Preview</button>
                        </div>
                    </div>
                </div>

                <!-- Skeleton Argument Form -->
                <div id="skeletonArgumentForm" class="document-form hidden">
                    <div class="form-card">
                        <h3 class="form-section-title">Hearing Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="hearingDate">Hearing Date</label>
                                <input type="date" id="hearingDate">
                            </div>
                            <div class="form-group">
                                <label for="hearingType">Hearing Type</label>
                                <input type="text" id="hearingType" placeholder="e.g., Final Hearing, Directions Hearing">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="timeEstimate">Time Estimate</label>
                            <input type="text" id="timeEstimate" placeholder="e.g., 2 hours">
                        </div>

                        <h3 class="form-section-title">Skeleton Content</h3>
                        <div class="form-group">
                            <label for="skIntro">Introduction</label>
                            <textarea id="skIntro" rows="3" placeholder="This skeleton argument is filed on behalf of the Applicant..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="skIssues">Issues</label>
                            <textarea id="skIssues" rows="4" placeholder="The issues for determination are:&#10;a) Whether P lacks capacity to...&#10;b) Whether it is in P's best interests to..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="skLaw">Legal Framework</label>
                            <textarea id="skLaw" rows="6" placeholder="The applicable legal framework is:&#10;&#10;Mental Capacity Act 2005, sections 1-4..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="skApplication">Application of Law to Facts</label>
                            <textarea id="skApplication" rows="6" placeholder="Applying the legal framework to the facts of this case..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="skRelief">Relief Sought</label>
                            <textarea id="skRelief" rows="3" placeholder="The Applicant invites the court to make the following orders:&#10;a) A declaration that...&#10;b) An order that..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="skAuthorities">Authorities List</label>
                            <textarea id="skAuthorities" rows="4" placeholder="1. Re X [2024] EWCOP 1&#10;2. Cheshire West [2014] UKSC 19"></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" id="backToStep2Skeleton">Back</button>
                            <button type="button" class="btn btn-primary" id="toStep4Skeleton">Continue to Preview</button>
                        </div>
                    </div>
                </div>

                <!-- Position Statement Form -->
                <div id="positionStatementForm" class="document-form hidden">
                    <div class="form-card">
                        <h3 class="form-section-title">Hearing Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="psHearingDate">Hearing Date</label>
                                <input type="date" id="psHearingDate">
                            </div>
                            <div class="form-group">
                                <label for="psOnBehalfOf">On Behalf Of</label>
                                <input type="text" id="psOnBehalfOf" placeholder="e.g., The Applicant">
                            </div>
                        </div>

                        <h3 class="form-section-title">Position Statement Content</h3>
                        <div class="form-group">
                            <label for="psIntro">Introduction & Background</label>
                            <textarea id="psIntro" rows="4" placeholder="1. This position statement is filed on behalf of...&#10;&#10;2. Background..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="psCurrentPosition">Current Position</label>
                            <textarea id="psCurrentPosition" rows="6" placeholder="The Applicant's current position is..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="psOrders">Orders Sought</label>
                            <textarea id="psOrders" rows="4" placeholder="The Applicant invites the court to:&#10;a) Make a declaration that...&#10;b) Approve..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="psOutstanding">Outstanding Issues (if any)</label>
                            <textarea id="psOutstanding" rows="3" placeholder="The following matters remain outstanding..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" id="backToStep2Position">Back</button>
                            <button type="button" class="btn btn-primary" id="toStep4Position">Continue to Preview</button>
                        </div>
                    </div>
                </div>

                <!-- Draft Order Form -->
                <div id="draftOrderForm" class="document-form hidden">
                    <div class="form-card">
                        <h3 class="form-section-title">Order Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="orderType">Order Type</label>
                                <select id="orderType">
                                    <option value="ORDER">Order</option>
                                    <option value="DIRECTIONS ORDER">Directions Order</option>
                                    <option value="FINAL ORDER">Final Order</option>
                                    <option value="CONSENT ORDER">Consent Order</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="judgeName">Judge (if known)</label>
                                <input type="text" id="judgeName" placeholder="e.g., HHJ Smith">
                            </div>
                        </div>

                        <h3 class="form-section-title">Recitals</h3>
                        <div class="form-group">
                            <label for="recitals">Recitals (each on new line)</label>
                            <textarea id="recitals" rows="5" placeholder="UPON reading the application dated...&#10;AND UPON hearing counsel for the Applicant...&#10;AND UPON the court being satisfied that..."></textarea>
                        </div>

                        <h3 class="form-section-title">Order Provisions</h3>
                        <div class="form-group">
                            <label for="orderProvisions">Provisions (numbered)</label>
                            <textarea id="orderProvisions" rows="8" placeholder="IT IS ORDERED THAT:&#10;&#10;1. P lacks capacity to make decisions about...&#10;&#10;2. It is in P's best interests to...&#10;&#10;3. Liberty to apply."></textarea>
                        </div>

                        <h3 class="form-section-title">Service & Costs</h3>
                        <div class="form-group">
                            <label for="serviceProvisions">Service Provisions</label>
                            <textarea id="serviceProvisions" rows="3" placeholder="This order shall be served on all parties within 7 days."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="costsProvisions">Costs</label>
                            <input type="text" id="costsProvisions" placeholder="e.g., No order as to costs / Costs reserved">
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" id="backToStep2Order">Back</button>
                            <button type="button" class="btn btn-primary" id="toStep4Order">Continue to Preview</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 4: Preview & Generate -->
            <section id="step4" class="step">
                <div class="step-header">
                    <h2>Preview & Download</h2>
                    <p>Review your document and download in your preferred format</p>
                </div>
                <div class="preview-container">
                    <div class="preview-header">
                        <h3>Document Preview</h3>
                        <div class="preview-actions">
                            <button class="btn btn-outline btn-sm" id="editDocument">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                Edit
                            </button>
                        </div>
                    </div>
                    <div id="previewContent" class="preview-content">
                        <!-- Preview will be rendered here -->
                    </div>
                </div>

                <div class="form-card">
                    <h3 class="form-section-title">Signature Block</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="preparedBy">Prepared By</label>
                            <input type="text" id="preparedBy" value="Sarah Okafor, Barrister">
                        </div>
                        <div class="form-group">
                            <label for="documentDate">Date</label>
                            <input type="date" id="documentDate">
                        </div>
                    </div>

                    <h3 class="form-section-title">Download Options</h3>
                    <div class="download-options">
                        <button class="btn btn-primary btn-lg" id="downloadWord">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                            </svg>
                            Download Word (.docx)
                        </button>
                        <button class="btn btn-secondary btn-lg" id="downloadPDF">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <path d="M12 18v-6"></path>
                                <path d="M9 15l3 3 3-3"></path>
                            </svg>
                            Download PDF
                        </button>
                    </div>

                    <div class="form-actions" style="margin-top: 2rem;">
                        <button type="button" class="btn btn-outline" id="backToStep3">Back</button>
                        <button type="button" class="btn btn-outline" id="startOver">Start New Document</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2026 Sarah Okafor Chambers. All rights reserved.</p>
            <p><a href="https://sarah-okafor-hub.pages.dev" target="_blank">Sarah Okafor Hub</a></p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/docx@8.2.3/build/index.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="app.js"></script>
</body>
</html>
